<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Versa - A/B Test Calculator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jstat/1.9.5/jstat.min.js"></script>
  <style>
    body {
      font-family: 'Avenir', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
      background: #fff;
      margin: 0;
      padding: 2rem;
      color: #111;
      font-size: 16px;
    }

    .header-logo {
      font-size: 1.8rem;
      font-weight: 800;
      margin-bottom: 1rem;
    }

    h1 {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    h1 span {
      font-weight: 800;
    }

    .intro {
      max-width: 700px;
      margin-bottom: 2rem;
    }

    .container {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .input-box {
      background: #e9fce9;
      border: 2px solid #b6f1b6;
      border-radius: 16px;
      padding: 2rem 1.5rem;
      width: 100%;
      max-width: 360px;
      box-sizing: border-box;
    }

    .input-box h2 {
      font-size: 1.2rem;
      font-weight: 700;
      margin-top: 0;
      margin-bottom: 1.5rem;
      white-space: nowrap;
    }

    label {
      display: block;
      margin-top: 1.2rem;
      font-weight: 500;
    }

    input {
      width: 100%;
      padding: 0.8rem;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      box-sizing: border-box;
    }

    button {
      margin-top: 2rem;
      width: 100%;
      padding: 0.9rem;
      font-size: 1rem;
      font-weight: 700;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a65e;
    }

    .results, .summary {
      flex: 1;
      max-width: 500px;
      background: #f9f9f9;
      padding: 1.2rem;
      border-radius: 10px;
      border: 2px solid #ccc;
      font-size: 1rem;
    }

    .summary {
      background: #f0f8ff;
      border-color: #ccd;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }

    th, td {
      border: 1px solid #ccc;
      padding: 0.6rem;
      text-align: center;
    }

    th {
      background: #eee;
    }
  </style>
</head>
<body>
  <div class="header-logo">versa</div>
  <div class="intro">
    <h1>Welcome üëã to <span>versa</span> - Your All-in-One UXR & Product building tool!</h1>
    <p>Unlock the power of data-driven decisions. Whether you're testing new features, comparing versions, or just looking for clarity, versa‚Äôs intuitive calculators give you the insights you need in seconds. Dive deep, get clear answers, and make smarter choices.</p>
  </div>

  <div class="container">
    <div class="input-box">
      <h2>Which design should we use üîç?</h2>
      <label for="v1_passes">Design 1 (Successes):</label>
      <input type="number" id="v1_passes" />
      <label for="v1_total">Design 1 (Total):</label>
      <input type="number" id="v1_total" />
      <label for="v2_passes">Design 2 (Successes):</label>
      <input type="number" id="v2_passes" />
      <label for="v2_total">Design 2 (Total):</label>
      <input type="number" id="v2_total" />
      <button onclick="calculate()">Calculate</button>
    </div>

    <div class="results">
      <table>
        <thead><tr><th>Variant</th><th>Observed P</th><th>Best Estimate P</th><th>CI Lower</th><th>CI Upper</th></tr></thead>
        <tbody>
          <tr><td>D1</td><td id="obs1">--</td><td id="est1">--</td><td id="ci1low">--</td><td id="ci1high">--</td></tr>
          <tr><td>D2</td><td id="obs2">--</td><td id="est2">--</td><td id="ci2low">--</td><td id="ci2high">--</td></tr>
        </tbody>
      </table>

      <table>
        <thead><tr><th>Metric</th><th>D1 > D2</th><th>D2 > D1</th></tr></thead>
        <tbody>
          <tr><td>P-Direction</td><td id="pd1">--</td><td id="pd2">--</td></tr>
          <tr><td>Evidence</td><td id="ev1">--</td><td id="ev2">--</td></tr>
        </tbody>
      </table>

      <table>
        <thead><tr><th>Statistical Test</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Fisher‚Äôs Exact P</td><td id="fisher">--</td></tr>
          <tr><td>Statistically Significant?</td><td id="sig">--</td></tr>
        </tbody>
      </table>
    </div>

    <div class="summary">
      <strong>Summary:</strong>
      <div id="takeaway">--</div>
    </div>
  </div>

  <script>
  // ... keep all functions above as-is ...

  function generateTakeaway(p, direction, simulatedWins, p_direction, winner, emoji) {
    if (p === 50) {
      return `<p>üß† There is no evidence favoring either design. Results are evenly split.</p>`;
    }
    const evidence = classifyEvidence(p);
    const loser = direction === "v1" ? "Design 2" : "Design 1";
    return `
      <p>üß† There is <strong>${evidence.toLowerCase()}</strong> that <strong>${winner}</strong> performs better than <strong>${loser}</strong>.</p>
      <p>üî¨ Simulated Wins: <strong>${winner}</strong> won <strong>${simulatedWins}</strong> out of 100,000 simulations ${emoji}</p>
      <p>üìä Directional Evidence: There‚Äôs a <strong>${p_direction}%</strong> chance that ${winner} is better than ${loser}</p>
    `;
  }

  function calculate() {
    // ... keep rest of your logic the same up to this point ...

    const direction = p_dir > 50 ? "v1" : p_rev > 50 ? "v2" : "tie";
    const winner = direction === "v1" ? "Design 1" : direction === "v2" ? "Design 2" : "Neither design";
    const emoji = direction === "v1" ? "üíö" : direction === "v2" ? "üíô" : "‚öñÔ∏è";
    const simulatedWins = Math.round((Math.max(p_dir, p_rev) / 100) * sims);
    const pDirFinal = p_dir > 50 ? p_dir : p_rev;

    const takeaway = generateTakeaway(
      pDirFinal,
      direction,
      simulatedWins,
      pDirFinal,
      winner,
      emoji
    );
    document.getElementById("takeaway").innerHTML = takeaway;
  }
</script>

</body>
</html>
